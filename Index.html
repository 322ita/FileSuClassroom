<!DOCTYPE html>
<html>
<head>
	<title>File Su Classroom</title>
</head>
<body>
	<header>
		<h1>File Su Classroom</h1>
	</header>

	<div id="file-list">
		<p>caricando...</p>
	</div>

	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script>
		var username = "322ita";
		var repository = "FileSuClassroom";
		var api_url = "https://api.github.com/repos/" + username + "/" + repository + "/contents/";

		$.getJSON(api_url, function(data) {
			var file_list = '<ul>';
			$.each(data, function(index, value) {
				if(value.type == "dir") {
					file_list += '<li><a href="#" class="folder" data-folder="' + value.path + '">' + value.name + '</a></li>';
				} else {
					file_list += '<li><a href="' + value.download_url + '">' + value.name + '</a></li>';
				}
			});
			file_list += '</ul>';
			$('#file-list').html(file_list);
		});

		$('#file-list').on('click', '.folder', function(e) {
			e.preventDefault();
			var folder_path = $(this).data('folder');
			$.getJSON(api_url + folder_path, function(data) {
				var file_list = '<ul>';
				$.each(data, function(index, value) {
					if(value.type == "dir") {
						file_list += '<li><a href="#" class="folder" data-folder="' + value.path + '">' + value.name + '</a></li>';
					} else {
						file_list += '<li><a href="' + value.download_url + '">' + value.name + '</a></li>';
					}
				});
				file_list += '</ul>';
				$('#file-list').html(file_list);
			});
		});
	</script>
</body>
</html>